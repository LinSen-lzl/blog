<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.60">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>深海怪鱼的博客</title><meta name="description" content="">
    <link rel="preload" href="/assets/style-fae0be7d.css" as="style"><link rel="stylesheet" href="/assets/style-fae0be7d.css">
    <link rel="modulepreload" href="/assets/app-80ab7d1e.js"><link rel="modulepreload" href="/assets/framework-840e299b.js"><link rel="modulepreload" href="/assets/index.html-7f1f58ef.js"><link rel="modulepreload" href="/assets/index.html-d80f686e.js"><link rel="prefetch" href="/assets/index.html-cc3ff540.js" as="script"><link rel="prefetch" href="/assets/index.html-674213a4.js" as="script"><link rel="prefetch" href="/assets/index.html-8a69f549.js" as="script"><link rel="prefetch" href="/assets/index.html-79966929.js" as="script"><link rel="prefetch" href="/assets/index.html-f38c73e2.js" as="script"><link rel="prefetch" href="/assets/index.html-91e384f2.js" as="script"><link rel="prefetch" href="/assets/index.html-9c7dabee.js" as="script"><link rel="prefetch" href="/assets/index.html-a827c915.js" as="script"><link rel="prefetch" href="/assets/index.html-eefc8335.js" as="script"><link rel="prefetch" href="/assets/index.html-cfbd84e1.js" as="script"><link rel="prefetch" href="/assets/index.html-7e469629.js" as="script"><link rel="prefetch" href="/assets/index.html-ef96cddc.js" as="script"><link rel="prefetch" href="/assets/index.html-ec236be3.js" as="script"><link rel="prefetch" href="/assets/index.html-841e706b.js" as="script"><link rel="prefetch" href="/assets/index.html-ff364d44.js" as="script"><link rel="prefetch" href="/assets/index.html-c1ef0a75.js" as="script"><link rel="prefetch" href="/assets/index.html-2486f57d.js" as="script"><link rel="prefetch" href="/assets/index.html-21aa6c92.js" as="script"><link rel="prefetch" href="/assets/index.html-d877e25e.js" as="script"><link rel="prefetch" href="/assets/index.html-cd4d149e.js" as="script"><link rel="prefetch" href="/assets/index.html-53c21222.js" as="script"><link rel="prefetch" href="/assets/index.html-bddfe88c.js" as="script"><link rel="prefetch" href="/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/assets/index.html-1e544faf.js" as="script"><link rel="prefetch" href="/assets/index.html-5c3a09e7.js" as="script"><link rel="prefetch" href="/assets/index.html-7bb1b4b9.js" as="script"><link rel="prefetch" href="/assets/index.html-48c80f6a.js" as="script"><link rel="prefetch" href="/assets/index.html-76a73c53.js" as="script"><link rel="prefetch" href="/assets/index.html-4d13f142.js" as="script"><link rel="prefetch" href="/assets/index.html-9704c060.js" as="script"><link rel="prefetch" href="/assets/index.html-48b9fead.js" as="script"><link rel="prefetch" href="/assets/index.html-0cf1e22f.js" as="script"><link rel="prefetch" href="/assets/index.html-8a2b9387.js" as="script"><link rel="prefetch" href="/assets/index.html-820d6b15.js" as="script"><link rel="prefetch" href="/assets/index.html-92ea875d.js" as="script"><link rel="prefetch" href="/assets/index.html-5c2e3f3b.js" as="script"><link rel="prefetch" href="/assets/index.html-182c9fe1.js" as="script"><link rel="prefetch" href="/assets/index.html-e826d174.js" as="script"><link rel="prefetch" href="/assets/index.html-bbfcb7d9.js" as="script"><link rel="prefetch" href="/assets/index.html-428ecd34.js" as="script"><link rel="prefetch" href="/assets/index.html-4b654354.js" as="script"><link rel="prefetch" href="/assets/index.html-5a5894f1.js" as="script"><link rel="prefetch" href="/assets/index.html-4f2f59d4.js" as="script"><link rel="prefetch" href="/assets/index.html-dd64a08f.js" as="script"><link rel="prefetch" href="/assets/index.html-5b61c55a.js" as="script"><link rel="prefetch" href="/assets/404.html-bffc5856.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/main.jpg" alt="深海怪鱼的博客"><span class="site-name can-hide">深海怪鱼的博客</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="后端"><span class="title">后端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="后端"><span class="title">后端</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/backend/websocket/" class="" aria-label="WebSocket"><!--[--><!--]--> WebSocket <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/backend/javathread/" class="" aria-label="Java多线程与线程池"><!--[--><!--]--> Java多线程与线程池 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/backend/threadsync/" class="" aria-label="Java线程同步"><!--[--><!--]--> Java线程同步 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/backend/javalock/" class="router-link-active router-link-exact-active router-link-active" aria-label="Java锁"><!--[--><!--]--> Java锁 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/backend/mysql/" class="" aria-label="MySQL"><!--[--><!--]--> MySQL <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/backend/flowable/" class="" aria-label="Flowable工作流"><!--[--><!--]--> Flowable工作流 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/backend/mq" class="" aria-label="消息队列"><!--[--><!--]--> 消息队列 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/backend/springcloud/" class="" aria-label="SpringCloud"><!--[--><!--]--> SpringCloud <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/backend/jdknewfeatures" class="" aria-label="JDK新特性"><!--[--><!--]--> JDK新特性 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="算法"><span class="title">算法</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="算法"><span class="title">算法</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/algorithm/thinking/" class="" aria-label="算法思想"><!--[--><!--]--> 算法思想 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/algorithm/dp/" class="" aria-label="算法题:动态规划"><!--[--><!--]--> 算法题:动态规划 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/algorithm/sw/" class="" aria-label="算法题:滑动窗口"><!--[--><!--]--> 算法题:滑动窗口 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/algorithm/dac/" class="" aria-label="算法题:分治"><!--[--><!--]--> 算法题:分治 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="部署"><span class="title">部署</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="部署"><span class="title">部署</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/deployment/docker/" class="" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/deployment/nginx/" class="" aria-label="Nginx"><!--[--><!--]--> Nginx <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="AI"><span class="title">AI</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="AI"><span class="title">AI</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/ai/mcp/" class="" aria-label="mcp协议"><!--[--><!--]--> mcp协议 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="输入关键词..." autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="后端"><span class="title">后端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="后端"><span class="title">后端</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/backend/websocket/" class="" aria-label="WebSocket"><!--[--><!--]--> WebSocket <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/backend/javathread/" class="" aria-label="Java多线程与线程池"><!--[--><!--]--> Java多线程与线程池 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/backend/threadsync/" class="" aria-label="Java线程同步"><!--[--><!--]--> Java线程同步 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/backend/javalock/" class="router-link-active router-link-exact-active router-link-active" aria-label="Java锁"><!--[--><!--]--> Java锁 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/backend/mysql/" class="" aria-label="MySQL"><!--[--><!--]--> MySQL <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/backend/flowable/" class="" aria-label="Flowable工作流"><!--[--><!--]--> Flowable工作流 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/backend/mq" class="" aria-label="消息队列"><!--[--><!--]--> 消息队列 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/backend/springcloud/" class="" aria-label="SpringCloud"><!--[--><!--]--> SpringCloud <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/backend/jdknewfeatures" class="" aria-label="JDK新特性"><!--[--><!--]--> JDK新特性 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="算法"><span class="title">算法</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="算法"><span class="title">算法</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/algorithm/thinking/" class="" aria-label="算法思想"><!--[--><!--]--> 算法思想 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/algorithm/dp/" class="" aria-label="算法题:动态规划"><!--[--><!--]--> 算法题:动态规划 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/algorithm/sw/" class="" aria-label="算法题:滑动窗口"><!--[--><!--]--> 算法题:滑动窗口 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/algorithm/dac/" class="" aria-label="算法题:分治"><!--[--><!--]--> 算法题:分治 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="部署"><span class="title">部署</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="部署"><span class="title">部署</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/deployment/docker/" class="" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/deployment/nginx/" class="" aria-label="Nginx"><!--[--><!--]--> Nginx <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="AI"><span class="title">AI</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="AI"><span class="title">AI</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/ai/mcp/" class="" aria-label="mcp协议"><!--[--><!--]--> mcp协议 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a aria-current="page" href="/backend/javalock/#为什么要写这篇文章" class="router-link-active router-link-exact-active sidebar-item sidebar-heading active" aria-label="为什么要写这篇文章？"><!--[--><!--]--> 为什么要写这篇文章？ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/javalock/#锁的分类维度" class="router-link-active router-link-exact-active sidebar-item sidebar-heading active" aria-label="锁的分类维度"><!--[--><!--]--> 锁的分类维度 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/javalock/#按并发策略分类-悲观锁与乐观锁" class="router-link-active router-link-exact-active sidebar-item sidebar-heading active" aria-label="按并发策略分类（悲观锁与乐观锁）"><!--[--><!--]--> 按并发策略分类（悲观锁与乐观锁） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/javalock/#按公平性分类-公平锁与非公平锁" class="router-link-active router-link-exact-active sidebar-item sidebar-heading active" aria-label="按公平性分类（公平锁与非公平锁）"><!--[--><!--]--> 按公平性分类（公平锁与非公平锁） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/javalock/#按可重入性分类-可重入锁与不可重入锁" class="router-link-active router-link-exact-active sidebar-item sidebar-heading active" aria-label="按可重入性分类（可重入锁与不可重入锁）"><!--[--><!--]--> 按可重入性分类（可重入锁与不可重入锁） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/backend/javalock/#按共享性分类-共享锁与排他锁" class="router-link-active router-link-exact-active sidebar-item sidebar-heading active" aria-label="按共享性分类（共享锁与排他锁）"><!--[--><!--]--> 按共享性分类（共享锁与排他锁） <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h2 id="为什么要写这篇文章" tabindex="-1"><a class="header-anchor" href="#为什么要写这篇文章" aria-hidden="true">#</a> 为什么要写这篇文章？</h2><p>上一篇文章中提到了锁（synchronized、ReentrantLock等）是线程同步的一种实现方式，但也只是提了一嘴。逐渐了解更多关于锁的机制后，发现锁的种类是多样的，如悲观锁、乐观锁，公平锁、非公平锁等，而且它是不仅仅存在于java语言这个层面的。然后这里我想到的问题是，为什么要给这个锁取这么一个名字，它是要从什么样的角度去解决实际场景问题的，然后要怎么给这些锁分门别类，以便于有一个更好的理解</p><h2 id="锁的分类维度" tabindex="-1"><a class="header-anchor" href="#锁的分类维度" aria-hidden="true">#</a> 锁的分类维度</h2><p>自己结合了一下在AI和百度找到的信息，锁能够按照以下的层面进行分类：</p><ul><li>按并发策略分类：在多线程对共享资源进行<strong>并发竞争访问</strong>时，锁<strong>如何应对这种竞争冲突</strong></li><li>按公平性分类：在多个线程请求锁时，锁<strong>如何对这些线程的请求顺序进行处理</strong></li><li>按可重入性分类：可重入性在锁的层面的描述就是<strong>一个线程已经持有了一把锁后，能否重复获取这把锁</strong></li><li>按共享性分类：只<strong>对共享资源进行读操作</strong>的前提下，是否允许<strong>多个线程同时持有锁</strong>访问共享资源</li></ul><h2 id="按并发策略分类-悲观锁与乐观锁" tabindex="-1"><a class="header-anchor" href="#按并发策略分类-悲观锁与乐观锁" aria-hidden="true">#</a> 按并发策略分类（悲观锁与乐观锁）</h2><h4 id="一、悲观锁" tabindex="-1"><a class="header-anchor" href="#一、悲观锁" aria-hidden="true">#</a> 一、悲观锁</h4><ul><li><p>定义：悲观锁认为每次访问共享资源都会发生冲突，因此必须先加锁独占资源</p></li><li><p>实例：</p><ul><li>mysql的行级锁：SELECT...FOR UPDATE，也叫排他锁</li><li>Java：synchronized关键字、ReentranLock</li><li>分布式锁：Redis的SETNX、ZooKeeper的分布式锁</li></ul></li><li><p>特点：</p><ul><li>线程资源访问前必须获取锁，否则阻塞或等待</li><li>保证强一致性，但性能开销较大</li><li>可能引发死锁（需注意锁顺序和释放机制）</li></ul></li><li><p>适用场景：写操作频繁、冲突概率较高的场景（如金融交易、库存扣减）</p></li></ul><h4 id="二、乐观锁" tabindex="-1"><a class="header-anchor" href="#二、乐观锁" aria-hidden="true">#</a> 二、乐观锁</h4><ul><li><p>定义：乐观锁认为访问共享资源时发生冲突的概率较低，都是先直接操作资源，提交时再检测是否冲突</p></li><li><p>实例：</p><ul><li>mysql更新操作的where条件：执行 UPDATE 语句提交结果时，在 WHERE 条件中校验值是否改变</li><li>CAS：java原子类</li></ul></li><li><p>特点：</p><ul><li>无锁化设计，通过重试机制解决冲突（如CAS自旋）</li><li>性能高，但需处理冲突回滚逻辑</li><li>可能产生ABA问题</li></ul></li><li><p>适用场景：读多写少、冲突概率较低的场景（如评论计数，状态更新）</p></li></ul><h2 id="按公平性分类-公平锁与非公平锁" tabindex="-1"><a class="header-anchor" href="#按公平性分类-公平锁与非公平锁" aria-hidden="true">#</a> 按公平性分类（公平锁与非公平锁）</h2><h4 id="一、公平锁" tabindex="-1"><a class="header-anchor" href="#一、公平锁" aria-hidden="true">#</a> 一、公平锁</h4><ul><li><p>定义：当多个线程请求公平锁时，按照先到先得的顺序分配锁资源。新线程请求锁时，若已有其他线程在等待，则必须进入等待队列排队</p></li><li><p>实现示例：</p><ul><li>Java：ReentrantLock的公平模式（new ReentrantLock(true)）</li></ul></li><li><p>特点：</p><ul><li>能够避免线程饥饿，不会出现某些线程长期等待的情况</li><li>因为严格的排队机制降低了并发效率，造成吞吐量较低</li><li>性能开销大，必须唤醒等待队列中的第一个等待线程，导致频繁的上下文切换</li></ul></li><li><p>适用场景：需要严格保证线程执行顺序、对公平性要求高于性能的场景（如任务调度）</p></li></ul><h4 id="二、非公平锁" tabindex="-1"><a class="header-anchor" href="#二、非公平锁" aria-hidden="true">#</a> 二、非公平锁</h4><ul><li><p>定义：顾名思义，非公平锁允许线程插队竞争锁资源，即使是已有线程在等待队列中。新线程可以直接尝试获取锁，若失败再进入队列等待</p></li><li><p>实现示例：</p><ul><li>Java：ReentrantLock的非公平模式（new ReentrantLock()）、synchronized</li></ul></li><li><p>特点：</p><ul><li>高吞吐量，减少线程的切换次数，新线程能直接获得锁</li><li>在冲突概率较低的场景，性能优于公平锁</li><li>在高并发的场景，新线程的持续插队可能导致等待队列中的线程长期无法获得锁，造成线程饥饿</li></ul></li><li><p>适用场景：高并发、性能优先的场景</p></li></ul><h2 id="按可重入性分类-可重入锁与不可重入锁" tabindex="-1"><a class="header-anchor" href="#按可重入性分类-可重入锁与不可重入锁" aria-hidden="true">#</a> 按可重入性分类（可重入锁与不可重入锁）</h2><h4 id="一、可重入锁" tabindex="-1"><a class="header-anchor" href="#一、可重入锁" aria-hidden="true">#</a> 一、可重入锁</h4><ul><li><p>定义：一个线程在持有一把锁后，可以重复获取这把锁，且需要对应数量的释放操作才能完全释放锁</p></li><li><p>实现实例：</p><ul><li>Java：synchronized、ReentrantLock</li></ul></li><li><p>特点：</p><ul><li>可重入的特性可以避免线程因递归调用或嵌套同步导致死锁</li><li>锁的释放需与获取次数匹配（如获取3次，需释放3次）</li></ul></li><li><p>适用场景：需要递归调用、嵌套同步代码块的场景</p></li></ul><h4 id="二、非可重入锁" tabindex="-1"><a class="header-anchor" href="#二、非可重入锁" aria-hidden="true">#</a> 二、非可重入锁</h4><ul><li><p>定义：一个线程在持有一把锁后，如果再次重复请求获得锁，会导致死锁</p></li><li><p>实现实例：</p><ul><li>Java：StampedLock（非完全可重入，写锁不可重入，读锁可重入）</li></ul></li><li><p>特点：</p><ul><li>重复获得锁会直接阻塞或失败，导致死锁</li><li>需要在代码里手动避免可重入</li></ul></li><li><p>适合场景：资源需要被单次分配的场景，不允许同一线程重复获取</p></li></ul><h2 id="按共享性分类-共享锁与排他锁" tabindex="-1"><a class="header-anchor" href="#按共享性分类-共享锁与排他锁" aria-hidden="true">#</a> 按共享性分类（共享锁与排他锁）</h2><h4 id="一、共享锁" tabindex="-1"><a class="header-anchor" href="#一、共享锁" aria-hidden="true">#</a> 一、共享锁</h4><ul><li><p>定义：共享锁允许多个线程同时持有锁，但仅限于对共享资源进行读操作</p></li><li><p>实现实例：</p><ul><li><p>Java：ReentrantReadWriteLock.ReadLock</p></li><li><p>mysql的读锁：SELECT ... LOCK IN SHARE MODE</p></li></ul></li><li><p>特点：</p><ul><li>共享锁能够实现多个线程同时读取数据</li><li>共享锁与独占锁互斥，当有线程持有共享锁时，独占锁无法被获取（写操作被阻塞）</li></ul></li><li><p>适合场景：对资源读多写少的场景（如读取缓存）</p></li></ul><h4 id="二、排他锁" tabindex="-1"><a class="header-anchor" href="#二、排他锁" aria-hidden="true">#</a> 二、排他锁</h4><ul><li>定义：又叫独占锁。无论是否读写操作，独占锁同一时间只允许一个线程持有锁，其他线程无论读写均被阻塞</li><li>实现实例： <ul><li>Java：synchronized、ReentrantLock</li><li>mysql的行级锁：SELECT ... FOR UPDATE</li><li>分布式锁：Redis的SETNX</li></ul></li><li>特点： <ul><li>排他锁被占用时，其他线程无法获取</li><li>排他锁能确保写操作的原子性和一致性</li><li>在高并发写操作的场景下，吞吐量会降低</li></ul></li><li>适合场景：写操作频繁、对数据一致性要求高的场景（如账户扣款、库存扣减）</li></ul></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 985451028@qq.com">LinSen</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app-80ab7d1e.js" defer></script>
  </body>
</html>
